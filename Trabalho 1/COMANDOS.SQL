CREATE TABLE PERFIL(
EMAIL VARCHAR(50) NOT NULL,
SENHA VARCHAR(7) NOT NULL,
NOME VARCHAR(50) NOT NULL,
DATA_NASCIMENTO DATE NOT NULL,
SEXO CHAR(1) NOT NULL,

PRIMARY KEY(EMAIL)
);

CREATE TABLE ALBUM(
CRIADOR VARCHAR(50) NOT NULL,
NOME VARCHAR(50) NOT NULL,
DATA_CRIACAO DATE NOT NULL,

PRIMARY KEY(CRIADOR, NOME, DATA_CRIACAO)
);

CREATE TABLE COMENTARIO (
  COMENTADOR varchar(50) NOT NULL,
  DATA_HORA date NOT NULL,
  DESCRICAO varchar(300) NOT NULL,
  PRIMARY KEY (COMENTADOR,DATA_HORA)
)

CREATE TABLE FOTO (
  CRIADOR varchar(50) NOT NULL,
  IMAGEM binary(1) NOT NULL,
  DATA_ENVIO date NOT NULL,
  DATA_CRIACAO_ALBUM date NOT NULL,
  NOME_ALBUM varchar(50) NOT NULL,
  DESCRICAO varchar(50) NOT NULL,
  PRIMARY KEY (DATA_ENVIO,CRIADOR,DATA_CRIACAO_ALBUM)
);

CREATE TABLE MENSAGEM (
  REMETENTE varchar(50) NOT NULL,
  DESTINATARIO varchar(50) NOT NULL,
  TEXTO varchar(50) NOT NULL,
  DATA date NOT NULL,  
PRIMARY KEY (REMETENTE, DESTINATARIO, DATA)
);

CREATE TABLE LINHA_DO_TEMPO (
  DONO varchar(50) NOT NULL,
  POSTADOR varchar(50) NOT NULL,
  COMENTADOR_COMENTARIO varchar(50) NOT NULL,
  DATAHORA_COMENTARIO date NOT NULL,  

PRIMARY KEY (DONO, POSTADOR, COMENTADOR_COMENTARIO, DATAHORA_COMENTARIO)
);

CREATE TABLE AMIGO_DE (
  ANFITRIAO varchar(50) NOT NULL,
  CONVIDADO varchar(50) NOT NULL, 

PRIMARY KEY (ANFITRIAO, CONVIDADO)
);

CREATE TABLE SEGUE (
  SEGUIDOR varchar(50) NOT NULL,
  SEGUIDO varchar(50) NOT NULL, 

PRIMARY KEY (SEGUIDOR, SEGUIDO)
);

CREATE TABLE COLECIONA (
  NOME_ALBUM varchar(50) NOT NULL,
  CRIADOR_ALBUM varchar(50) NOT NULL, 
  DATA_CRIACAO_ALBUM date NOT NULL,

PRIMARY KEY (NOME_ALBUM, DATA_CRIACAO_ALBUM, CRIADOR_ALBUM)
);

CREATE TABLE CURTIR_COMENTARIO (
  CURTIDOR varchar(50) NOT NULL,
  COMENTADOR_COMENTARIO varchar(50) NOT NULL, 
  DATA_HORA_COMENTARIO date NOT NULL,

PRIMARY KEY (CURTIDOR, COMENTADOR_COMENTARIO, DATA_HORA_COMENTARIO)
);

CREATE TABLE COMENTA_COMENTARIO (
  COMENTADOR varchar(50) NOT NULL,
  COMENTADOR_COMENTARIO varchar(50) NOT NULL, 
  DATA_HORA_COMENTARIO date NOT NULL,
  DATA_HORA date NOT NULL,

PRIMARY KEY (COMENTADOR, COMENTADOR_COMENTARIO, DATA_HORA_COMENTARIO, DATA_HORA)
);

CREATE TABLE COMENTA_LINHADOTEMPO (
  COMENTADOR_COMENTARIO varchar(50) NOT NULL, 
  POSTADOR varchar(50) NOT NULL, 
  DATA_HORA_COMENTARIO date NOT NULL,
  DONO_LINHA varchar(50) NOT NULL, 

PRIMARY KEY (COMENTADOR_COMENTARIO, DATA_HORA_COMENTARIO, DONO_LINHA)
);

CREATE TABLE POSSUI (
  DONO varchar(50) NOT NULL, 
  POSTADOR varchar(50) NOT NULL, 
  COMENTADOR_COMENTARIO varchar(50) NOT NULL, 
  DATA_HORA_COMENTARIO date NOT NULL,

PRIMARY KEY (COMENTADOR_COMENTARIO, DATA_HORA_COMENTARIO, DONO, POSTADOR)
);

CREATE TABLE ENVIA_RECEBE (
  REMETENTE varchar(50) NOT NULL, 
  DESTINATARIO varchar(50) NOT NULL, 
  DATAHORA date NOT NULL,

PRIMARY KEY (REMETENTE, DESTINATARIO, DATAHORA)
);

CREATE TABLE COMENTA_FOTO (
  COMENTADOR_COMENTARIO varchar(50) NOT NULL, 
  DATAHORA_COMENTARIO date NOT NULL,
  DATAENVIO_FOTO date NOT NULL,
  CRIADOR_FOTO varchar(50) NOT NULL, 
  NOME_ALBUM varchar(50) NOT NULL, 
  DATACRIACAO_ALBUM date NOT NULL,
  CRIADOR_ALBUM varchar(50) NOT NULL, 


PRIMARY KEY (COMENTADOR_COMENTARIO, DATAHORA_COMENTARIO, DATAENVIO_FOTO, CRIADOR_FOTO, NOME_ALBUM, DATACRIACAO_ALBUM, CRIADOR_ALBUM)
);

CREATE TABLE CURTIR_FOTO (
  CURTIDOR varchar(50) NOT NULL, 
  DATAENVIO_FOTO date NOT NULL,
  CRIADOR_FOTO varchar(50) NOT NULL, 
  NOME_ALBUM varchar(50) NOT NULL, 
  DATACRIACAO_ALBUM date NOT NULL,
  CRIADOR_ALBUM varchar(50) NOT NULL, 
  DATA_CURTIDA date NOT NULL,


PRIMARY KEY (CURTIDOR, DATAENVIO_FOTO, CRIADOR_FOTO, NOME_ALBUM, DATACRIACAO_ALBUM, CRIADOR_ALBUM)
);

CREATE TABLE FOTO_PERTENCE (
  DATAENVIO_FOTO date NOT NULL,
  CRIADOR_FOTO varchar(50) NOT NULL, 
  NOME_ALBUM varchar(50) NOT NULL, 
  DATACRIACAO_ALBUM date NOT NULL,
  CRIADOR_ALBUM varchar(50) NOT NULL, 


PRIMARY KEY (DATAENVIO_FOTO, CRIADOR_FOTO, NOME_ALBUM, DATACRIACAO_ALBUM, CRIADOR_ALBUM)
);


ALTER TABLE ALBUM
 
             ADD FOREIGN KEY(CRIADOR) REFERENCES PERFIL(EMAIL)
             ON DELETE CASCADE;

ALTER TABLE FOTO
 
             ADD FOREIGN KEY(CRIADOR) REFERENCES PERFIL(EMAIL)
             ON DELETE CASCADE;

ALTER TABLE COMENTARIO
 
             ADD FOREIGN KEY(COMENTADOR) REFERENCES PERFIL(EMAIL)
             ON DELETE CASCADE;

ALTER TABLE MENSAGEM
 
             ADD FOREIGN KEY(REMETENTE) REFERENCES PERFIL(EMAIL)
             ON DELETE RESTRICT,

 
             ADD FOREIGN KEY(DESTINATARIO) REFERENCES PERFIL(EMAIL)
             ON DELETE RESTRICT;
;

ALTER TABLE LINHA_DO_TEMPO
 
             ADD FOREIGN KEY(DONO) REFERENCES PERFIL(EMAIL) ON DELETE CASCADE,
             ADD FOREIGN KEY(POSTADOR) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(COMENTADOR_COMENTARIO) REFERENCES COMENTARIO(COMENTADOR);

ALTER TABLE AMIGO_DE
 
             ADD FOREIGN KEY(ANFITRIAO) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(CONVIDADO) REFERENCES PERFIL(EMAIL);

ALTER TABLE SEGUE
 
             ADD FOREIGN KEY(SEGUIDOR) REFERENCES PERFIL(EMAIL), 
             ADD FOREIGN KEY(SEGUIDO) REFERENCES PERFIL(EMAIL);

ALTER TABLE CURTIR_COMENTARIO
 
             ADD FOREIGN KEY(CURTIDOR) REFERENCES PERFIL(EMAIL)
             ADD FOREIGN KEY(COMENTADOR_COMENTARIO) REFERENCES COMENTARIO(COMENTADOR),
             ADD FOREIGN KEY(DATA_HORA_COMENTARIO) REFERENCES COMENTARIO(DATA_HORA);

ALTER TABLE COMENTA_COMENTARIO
 
             ADD FOREIGN KEY(COMENTADOR) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(COMENTADOR_COMENTARIO) REFERENCES COMENTARIO(COMENTADOR),
             ADD FOREIGN KEY(DATA_HORA_COMENTARIO) REFERENCES COMENTARIO(DATA_HORA);

ALTER TABLE COMENTA_LINHADOTEMPO
 
             ADD FOREIGN KEY(DONO_LINHA) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(POSTADOR) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(COMENTADOR_COMENTARIO) REFERENCES COMENTARIO(COMENTADOR),
             ADD FOREIGN KEY(DATA_HORA_COMENTARIO) REFERENCES COMENTARIO(DATA_HORA);

ALTER TABLE POSSUI
 
             ADD FOREIGN KEY(DONO) REFERENCES PERFIL(EMAIL) ON DELETE CASCADE,
             ADD FOREIGN KEY(POSTADOR) REFERENCES PERFIL(EMAIL) ON DELETE CASCADE,
             ADD FOREIGN KEY(COMENTADOR_COMENTARIO) REFERENCES COMENTARIO(COMENTADOR),
             ADD FOREIGN KEY(DATA_HORA_COMENTARIO) REFERENCES COMENTARIO(DATA_HORA);

ALTER TABLE ENVIA_RECEBE
 
             ADD FOREIGN KEY(REMETENTE) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(DESTINATARIO) REFERENCES PERFIL(EMAIL);

ALTER TABLE COMENTA_FOTO
 
             ADD FOREIGN KEY(CRIADOR_FOTO) REFERENCES PERFIL(EMAIL),
             ADD FOREIGN KEY(DATAENVIO_FOTO) REFERENCES FOTO(DATA_ENVIO),
             ADD FOREIGN KEY(COMENTADOR_COMENTARIO) REFERENCES COMENTARIO(COMENTADOR),
             ADD FOREIGN KEY(DATA_HORA_COMENTARIO) REFERENCES COMENTARIO(DATA_HORA),
             ADD FOREIGN KEY(NOME_ALBUM) REFERENCES ALBUM(NOME),
             ADD FOREIGN KEY(DATACRIACAO_ALBUM) REFERENCES ALBUM(DATA_CRIACAO),
             ADD FOREIGN KEY(CRIADOR_ALBUM) REFERENCES ALBUM(CRIADOR);

ALTER TABLE CURTIR_FOTO
              ADD FOREIGN KEY(CURTIDOR) REFERENCES PERFIL(EMAIL),
              ADD FOREIGN KEY(CRIADOR_FOTO) REFERENCES FOTO(CRIADOR),
             ADD FOREIGN KEY(DATAENVIO_FOTO) REFERENCES FOTO(DATA_ENVIO),
             ADD FOREIGN KEY(NOME_ALBUM) REFERENCES ALBUM(NOME),
             ADD FOREIGN KEY(DATACRIACAO_ALBUM) REFERENCES ALBUM(DATA_CRIACAO),
             ADD FOREIGN KEY(CRIADOR_ALBUM) REFERENCES ALBUM(CRIADOR);

ALTER TABLE FOTO_PERTENCE
 
             ADD FOREIGN KEY(CRIADOR_FOTO) REFERENCES FOTO(CRIADOR) ON DELETE CASCADE,
             ADD FOREIGN KEY(DATAENVIO_FOTO) REFERENCES FOTO(DATA_ENVIO) ON DELETE CASCADE,
             ADD FOREIGN KEY(NOME_ALBUM) REFERENCES ALBUM(NOME) ON DELETE CASCADE,
             ADD FOREIGN KEY(DATACRIACAO_ALBUM) REFERENCES ALBUM(DATA_CRIACAO) ON DELETE CASCADE,,
             ADD FOREIGN KEY(CRIADOR_ALBUM) REFERENCES ALBUM(CRIADOR) ON DELETE CASCADE;

